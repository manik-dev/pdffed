{"ast":null,"code":"var _jsxFileName = \"/Users/Shared/Previously Relocated Items/Security/development/react/wizard/src/components/pdfView.js\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport PdfFile from '../fw4.pdf';\nimport pdfform from '../../node_modules/pdfform.js/pdfform';\nimport minipdf from '../../node_modules/pdfform.js/minipdf';\nimport Grid from '@material-ui/core/Grid';\nimport Navigation from '../components/navigation';\nimport { connect } from 'react-redux';\nimport { mapping } from '../data/formFieldsMapping';\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(1, 1, 6),\n    width: '50%',\n    height: '800px',\n    background: 'beige'\n  }\n}));\n\nfunction asyncCall(props) {\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"GET\", PdfFile, true);\n  xhr.responseType = \"arraybuffer\";\n  const step1 = props.formReducer.step1;\n  const step3 = props.formReducer.step3;\n  const step4 = props.formReducer.step4;\n\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState === 4) {\n      if ((xhr.status === 200 || xhr.status == 0) && xhr.response) {\n        xhr.onloadend = function () {\n          var fields = pdfform().list_fields(this.response);\n          resetFields(fields);\n\n          for (let field of Object.keys(fields)) {\n            switch (field) {\n              case 'f1_01':\n                const name = step1.name.firstName + ' ' + step1.name.middleName;\n                fields['f1_01'] = [name];\n                break;\n\n              case 'f1_02':\n                const lastName = step1.name.lastName;\n                fields['f1_02'] = [lastName];\n                break;\n\n              case 'f1_03':\n                const street = step1.address.street;\n                fields['f1_03'] = [street];\n                break;\n\n              case 'f1_04':\n                var address = \"\";\n                if (step1.address.city) address += step1.address.city;\n                if (step1.address.state) address += ', ' + step1.address.state;\n                if (step1.address.zip) address += ', ' + step1.address.zip;\n                fields['f1_04'] = [address];\n                break;\n\n              case 'f1_05':\n                const ssn = step1.ssn;\n                fields['f1_05'] = [ssn];\n\n              case 'f1_06':\n                console.log(step3.qualifyingChildren);\n                fields['f1_06'] = [step3.qualifyingChildren];\n                break;\n\n              case 'f1_07':\n                fields['f1_07'] = [step3.dependents];\n                break;\n\n              case 'f1_08':\n                fields['f1_08'] = [step3.totalDependents];\n                break;\n\n              case 'f1_09':\n                fields['f1_09'] = [step4.otherIncome];\n                break;\n\n              case 'f1_10':\n                fields['f1_10'] = [step4.deductions];\n                break;\n\n              case 'f1_11':\n                fields['f1_11'] = [step4.extraWithholding];\n                break;\n\n              case 'c1_1':\n                var ms = [false, false, false];\n                if (step1.maritalStatus === 'Single or Married filing separately') ms = [1, false, false];else if (step1.maritalStatus === 'Married filing jointly (or Qualifying widow(er))') ms = [false, 2, false];else if (step1.maritalStatus === 'Head of household') ms = [false, false, 3];\n                fields['c1_1'] = ms;\n\n              case 'c1_2':\n                fields['c1_2'] = props.formReducer.step2.multiCheckBox;\n\n              default:\n                ;\n            }\n          }\n\n          var pdfData = pdfform(minipdf).transform(this.response, fields);\n          var blob = new Blob([pdfData], {\n            type: 'application/pdf'\n          });\n          var url = URL.createObjectURL(blob);\n          var iframe = document.getElementById(\"test\");\n          iframe.src = url;\n        };\n      }\n    }\n  };\n\n  xhr.send();\n}\n\nconst resetFields = function (fields) {\n  const keys = Object.keys(fields);\n\n  for (let key in keys) {\n    fields[keys[key]] = [];\n  }\n};\n\nfunction PdfView(props) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    asyncCall(props);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    alignItems: \"center\",\n    className: \"mainGrid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"heading\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \"Preview your data on form\")), React.createElement(Grid, {\n    container: true,\n    item: true,\n    xs: 12,\n    className: \"root\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    style: {\n      background: '#3f51b5'\n    },\n    size: \"large\",\n    onClick: handleOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, \"Preview\"), React.createElement(Modal, {\n    \"aria-labelledby\": \"transition-modal-title\",\n    \"aria-describedby\": \"transition-modal-description\",\n    className: classes.modal,\n    open: open,\n    closeAfterTransition: true,\n    BackdropComponent: Backdrop,\n    BackdropProps: {\n      timeout: 500\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(Fade, {\n    in: open,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, React.createElement(\"iframe\", {\n    id: \"test\",\n    style: {\n      boxSsizing: 'border-box',\n      width: '100%',\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"annotation-layer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }), React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    style: {\n      background: '#3f51b5'\n    },\n    size: \"medium\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \"Close\"))))))), React.createElement(Navigation, {\n    prev: \"/step1/ms\",\n    next: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }));\n}\n\nfunction mapStateToProps(state) {\n  return state;\n}\n\nexport default connect(mapStateToProps)(PdfView);","map":{"version":3,"sources":["/Users/Shared/Previously Relocated Items/Security/development/react/wizard/src/components/pdfView.js"],"names":["React","makeStyles","Modal","Backdrop","Fade","Paper","Button","Box","PdfFile","pdfform","minipdf","Grid","Navigation","connect","mapping","useStyles","theme","modal","display","alignItems","justifyContent","paper","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","width","height","asyncCall","props","xhr","XMLHttpRequest","open","responseType","step1","formReducer","step3","step4","onreadystatechange","readyState","status","response","onloadend","fields","list_fields","resetFields","field","Object","keys","name","firstName","middleName","lastName","street","address","city","state","zip","ssn","console","log","qualifyingChildren","dependents","totalDependents","otherIncome","deductions","extraWithholding","ms","maritalStatus","step2","multiCheckBox","pdfData","transform","blob","Blob","type","url","URL","createObjectURL","iframe","document","getElementById","src","send","key","PdfView","classes","setOpen","useState","handleOpen","handleClose","timeout","boxSsizing","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport PdfFile from '../fw4.pdf'\nimport pdfform from '../../node_modules/pdfform.js/pdfform'\nimport minipdf from '../../node_modules/pdfform.js/minipdf'\nimport Grid from '@material-ui/core/Grid';\nimport Navigation from '../components/navigation';\nimport { connect } from 'react-redux';\nimport {mapping} from '../data/formFieldsMapping';\n\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(1, 1, 6),\n    width: '50%',\n    height: '800px',\n    background:'beige'\n\n  },\n}));\n\n\n\nfunction asyncCall(props) {\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"GET\", PdfFile, true);\n  xhr.responseType = \"arraybuffer\";\nconst step1 = props.formReducer.step1;\nconst step3 = props.formReducer.step3;\nconst step4 = props.formReducer.step4;\n\n  xhr.onreadystatechange = function(){\n  if (xhr.readyState === 4){\n    if (((xhr.status === 200) || (xhr.status == 0)) && (xhr.response)){\n      xhr.onloadend = function() {\n        var fields = pdfform().list_fields(this.response);\n        resetFields(fields);\n         for(let field of Object.keys(fields)){\n            switch(field){\n              case 'f1_01':\n                const name = step1.name.firstName + ' ' + step1.name.middleName;\n                fields['f1_01'] = [name];\n                break;\n              case 'f1_02':\n                const lastName = step1.name.lastName;\n                fields['f1_02'] = [lastName];\n                break;\n              case 'f1_03':\n                const street = step1.address.street;\n                fields['f1_03'] = [street];\n                break;\n              case 'f1_04':\n                var address = \"\";\n                if(step1.address.city)\n                  address += step1.address.city;\n                if(step1.address.state)\n                  address += ', ' + step1.address.state;\n                if(step1.address.zip) \n                  address += ', ' + step1.address.zip;\n\n                fields['f1_04'] = [address];\n                break;\n              case 'f1_05':\n                const ssn = step1.ssn;\n                fields['f1_05'] = [ssn];\n              case 'f1_06':\n                console.log(step3.qualifyingChildren)\n                fields['f1_06'] = [step3.qualifyingChildren];\n                break;\n              case 'f1_07':\n                fields['f1_07'] = [step3.dependents];\n                break;\n              case 'f1_08':\n                fields['f1_08'] = [step3.totalDependents];\n                break;\n              case 'f1_09':\n                fields['f1_09'] = [step4.otherIncome];\n                break;\n              case 'f1_10':\n                fields['f1_10'] = [step4.deductions];\n                break;\n              case 'f1_11':\n                fields['f1_11'] = [step4.extraWithholding];\n                break;\n              case 'c1_1':\n                var ms = [false, false, false];\n                if(step1.maritalStatus === 'Single or Married filing separately')\n                  ms = [1, false, false];\n                else if (step1.maritalStatus === 'Married filing jointly (or Qualifying widow(er))')\n                  ms = [false, 2, false];\n                else if(step1.maritalStatus === 'Head of household')\n                  ms = [false, false, 3];\n                  fields['c1_1'] = ms;\n              case 'c1_2':\n                fields['c1_2'] = props.formReducer.step2.multiCheckBox;\n            default:\n              ; \n            }\n         }\n         var pdfData =  pdfform(minipdf).transform(this.response, fields)\n         var blob = new Blob([pdfData], {type: 'application/pdf'});\n         var url = URL.createObjectURL(blob);\n\n         var iframe = document.getElementById(\"test\");\n         iframe.src=url\n      }\n    }\n  }\n}\nxhr.send()\n\n}\n\nconst resetFields = function(fields){\n  const keys = Object.keys(fields);\n  for(let key in keys){\n    fields[keys[key]] = [];\n  }\n}\n\n\n\nfunction PdfView(props) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    asyncCall(props)\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Grid \n    container \n    justify=\"center\" \n    alignItems=\"center\" \n    className=\"mainGrid\"\n    >\n\n        <Grid item>\n            <h1 className=\"heading\">Preview your data on form</h1>\n        </Grid>\n\n        <Grid \n            container \n            item \n            xs={12} \n            className=\"root\"\n            >\n                <div>\n      <Button \n      variant=\"contained\"\n        style={{background: '#3f51b5'}} \n        size=\"large\" \n        onClick={handleOpen}\n      >\n          Preview  \n      </Button>\n      <Modal\n        aria-labelledby=\"transition-modal-title\"\n        aria-describedby=\"transition-modal-description\"\n        className={classes.modal}\n        open={open}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={open}>\n        <Paper className={classes.paper}>\n        <iframe id=\"test\" style={{boxSsizing: 'border-box', width: '100%', height: '100%'}} ></iframe>\n            <div id=\"annotation-layer\"></div>\n\n            <Box display=\"flex\"  justifyContent='center'>\n                  <Button \n                      variant=\"contained\" \n                      style={{background: '#3f51b5'}} \n                      size=\"medium\" \n                      onClick={handleClose}\n                  >\n                          Close  \n                  </Button>\n            </Box>\n        </Paper>\n        </Fade>\n      </Modal>\n    </div>\n            </Grid>\n\n\n        <Navigation prev=\"/step1/ms\" next=\"/\" />\n  </Grid>\n    \n  );\n}\n\nfunction mapStateToProps(state){\n  return state;\n}\n\nexport default connect(mapStateToProps)(PdfView);"]},"metadata":{},"sourceType":"module"}