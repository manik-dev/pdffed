{"ast":null,"code":"var _jsxFileName = \"/Users/Shared/Previously Relocated Items/Security/development/react/wizard/src/components/pdfView.js\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport PdfFile from '../fw4.pdf';\nimport pdfform from '../../node_modules/pdfform.js/pdfform';\nimport minipdf from '../../node_modules/pdfform.js/minipdf';\nimport Grid from '@material-ui/core/Grid';\nimport Navigation from '../components/navigation';\nimport { connect } from 'react-redux';\nimport { isMobile } from \"react-device-detect\";\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(1, 1, 6),\n    width: '50%',\n    height: '90%',\n    background: 'beige'\n  }\n}));\n\nconst pdfDataLoaded = (response, formReducer) => {\n  var fields = pdfform().list_fields(response);\n  resetFields(fields);\n  const step1 = formReducer.step1;\n  const step2 = formReducer.step2;\n  const step3 = formReducer.step3;\n  const step4 = formReducer.step4;\n\n  for (var field of Object.keys(fields)) {\n    switch (field) {\n      case 'f1_01':\n        const name = step1.name.firstName + ' ' + step1.name.middleName;\n        fields['f1_01'] = [name];\n        break;\n\n      case 'f1_02':\n        const lastName = step1.name.lastName;\n        fields['f1_02'] = [lastName];\n        break;\n\n      case 'f1_03':\n        const street = step1.address.street;\n        fields['f1_03'] = [street];\n        break;\n\n      case 'f1_04':\n        var address = \"\";\n        if (step1.address.city) address += step1.address.city;\n        if (step1.address.state) address += ', ' + step1.address.state;\n        if (step1.address.zip) address += ', ' + step1.address.zip;\n        fields['f1_04'] = [address];\n        break;\n\n      case 'f1_05':\n        const ssn = step1.ssn;\n        fields['f1_05'] = [ssn];\n        break;\n\n      case 'f1_06':\n        fields['f1_06'] = [step3.qualifyingChildren];\n        break;\n\n      case 'f1_07':\n        fields['f1_07'] = [step3.dependents];\n        break;\n\n      case 'f1_08':\n        fields['f1_08'] = [step3.totalDependents];\n        break;\n\n      case 'f1_09':\n        fields['f1_09'] = [step4.otherIncome];\n        break;\n\n      case 'f1_10':\n        fields['f1_10'] = [step4.deductions];\n        break;\n\n      case 'f1_11':\n        fields['f1_11'] = [step4.extraWithholding];\n        break;\n\n      case 'c1_1':\n        var ms = [false, false, false];\n        if (step1.maritalStatus === 'Single or Married filing separately') ms = [1, false, false];else if (step1.maritalStatus === 'Married filing jointly (or Qualifying widow(er))') ms = [false, 2, false];else if (step1.maritalStatus === 'Head of household') ms = [false, false, 3];\n        fields['c1_1'] = ms;\n        break;\n\n      case 'c1_2':\n        fields['c1_2'] = step2.multiCheckBox;\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return fields;\n};\n\nvar url = \"\";\n\nfunction asyncCall(props) {\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"GET\", PdfFile, true);\n  xhr.responseType = \"arraybuffer\";\n\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState === 4) {\n      if ((xhr.status === 200 || xhr.status === 0) && xhr.response) {\n        xhr.onloadend = function () {\n          var fields = pdfDataLoaded(this.response, props.formReducer);\n          var pdfData = pdfform(minipdf).transform(this.response, fields);\n          var blob = new Blob([pdfData], {\n            type: 'application/pdf'\n          });\n          url = URL.createObjectURL(blob);\n          var iframe = document.getElementById(\"pdfFrame\");\n          iframe.src = url;\n        };\n      }\n    }\n  };\n\n  xhr.send();\n}\n\nconst resetFields = function (fields) {\n  const keys = Object.keys(fields);\n\n  for (let key in keys) {\n    fields[keys[key]] = [];\n  }\n};\n\nfunction PdfView(props) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    asyncCall(props).then(alert); //if(isMobile)\n    //window.location = url;\n\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    alignItems: \"center\",\n    className: \"mainGrid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"heading\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, \"Preview your data on form\")), React.createElement(Grid, {\n    container: true,\n    item: true,\n    xs: 12,\n    className: \"root\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    size: \"large\",\n    onClick: handleOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, \"Show Data on Actual Form\"), React.createElement(Modal, {\n    \"aria-labelledby\": \"transition-modal-title\",\n    \"aria-describedby\": \"transition-modal-description\",\n    className: classes.modal,\n    open: open,\n    closeAfterTransition: true,\n    BackdropComponent: Backdrop,\n    BackdropProps: {\n      timeout: 500\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(Fade, {\n    in: open,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: \"paper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(\"iframe\", {\n    id: \"pdfFrame\",\n    style: {\n      boxSsizing: 'border-box',\n      width: '100%',\n      height: '100%'\n    },\n    title: \"Federal W4 Form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"annotation-layer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }), React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"outlined\",\n    size: \"medium\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"Close\"))))))), React.createElement(Navigation, {\n    prev: \"/pdffed/step4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }));\n}\n\nfunction mapStateToProps(state) {\n  return state;\n}\n\nexport default connect(mapStateToProps)(PdfView);","map":{"version":3,"sources":["/Users/Shared/Previously Relocated Items/Security/development/react/wizard/src/components/pdfView.js"],"names":["React","makeStyles","Modal","Backdrop","Fade","Paper","Button","Box","PdfFile","pdfform","minipdf","Grid","Navigation","connect","isMobile","useStyles","theme","modal","display","alignItems","justifyContent","paper","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","width","height","pdfDataLoaded","response","formReducer","fields","list_fields","resetFields","step1","step2","step3","step4","field","Object","keys","name","firstName","middleName","lastName","street","address","city","state","zip","ssn","qualifyingChildren","dependents","totalDependents","otherIncome","deductions","extraWithholding","ms","maritalStatus","multiCheckBox","url","asyncCall","props","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","onloadend","pdfData","transform","blob","Blob","type","URL","createObjectURL","iframe","document","getElementById","src","send","key","PdfView","classes","setOpen","useState","handleOpen","then","alert","handleClose","timeout","boxSsizing","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,OAAP,MAAoB,uCAApB;AACA,OAAOC,OAAP,MAAoB,uCAApB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AAEA,MAAMC,SAAS,GAAGd,UAAU,CAACe,KAAK,KAAK;AACrCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAE,MADJ;AAELC,IAAAA,UAAU,EAAE,QAFP;AAGLC,IAAAA,cAAc,EAAE;AAHX,GAD8B;AAMrCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,eAAe,EAAEN,KAAK,CAACO,OAAN,CAAcC,UAAd,CAAyBH,KADrC;AAELI,IAAAA,MAAM,EAAE,gBAFH;AAGLC,IAAAA,SAAS,EAAEV,KAAK,CAACW,OAAN,CAAc,CAAd,CAHN;AAILC,IAAAA,OAAO,EAAEZ,KAAK,CAACa,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,CAJJ;AAKLC,IAAAA,KAAK,EAAE,KALF;AAMLC,IAAAA,MAAM,EAAE,KANH;AAOLP,IAAAA,UAAU,EAAC;AAPN;AAN8B,CAAL,CAAN,CAA5B;;AAkBA,MAAMQ,aAAa,GAAG,CAACC,QAAD,EAAWC,WAAX,KAA2B;AAC/C,MAAIC,MAAM,GAAG1B,OAAO,GAAG2B,WAAV,CAAsBH,QAAtB,CAAb;AACAI,EAAAA,WAAW,CAACF,MAAD,CAAX;AAEA,QAAMG,KAAK,GAAGJ,WAAW,CAACI,KAA1B;AACA,QAAMC,KAAK,GAAGL,WAAW,CAACK,KAA1B;AACA,QAAMC,KAAK,GAAGN,WAAW,CAACM,KAA1B;AACA,QAAMC,KAAK,GAAGP,WAAW,CAACO,KAA1B;;AAEA,OAAI,IAAIC,KAAR,IAAiBC,MAAM,CAACC,IAAP,CAAYT,MAAZ,CAAjB,EAAqC;AACnC,YAAOO,KAAP;AACE,WAAK,OAAL;AACE,cAAMG,IAAI,GAAGP,KAAK,CAACO,IAAN,CAAWC,SAAX,GAAuB,GAAvB,GAA6BR,KAAK,CAACO,IAAN,CAAWE,UAArD;AACAZ,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACU,IAAD,CAAlB;AACA;;AACF,WAAK,OAAL;AACE,cAAMG,QAAQ,GAAGV,KAAK,CAACO,IAAN,CAAWG,QAA5B;AACAb,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACa,QAAD,CAAlB;AACA;;AACF,WAAK,OAAL;AACE,cAAMC,MAAM,GAAGX,KAAK,CAACY,OAAN,CAAcD,MAA7B;AACAd,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACc,MAAD,CAAlB;AACA;;AACF,WAAK,OAAL;AACE,YAAIC,OAAO,GAAG,EAAd;AACA,YAAGZ,KAAK,CAACY,OAAN,CAAcC,IAAjB,EACED,OAAO,IAAIZ,KAAK,CAACY,OAAN,CAAcC,IAAzB;AACF,YAAGb,KAAK,CAACY,OAAN,CAAcE,KAAjB,EACEF,OAAO,IAAI,OAAOZ,KAAK,CAACY,OAAN,CAAcE,KAAhC;AACF,YAAGd,KAAK,CAACY,OAAN,CAAcG,GAAjB,EACEH,OAAO,IAAI,OAAOZ,KAAK,CAACY,OAAN,CAAcG,GAAhC;AAEFlB,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACe,OAAD,CAAlB;AACA;;AACF,WAAK,OAAL;AACE,cAAMI,GAAG,GAAGhB,KAAK,CAACgB,GAAlB;AACAnB,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACmB,GAAD,CAAlB;AACA;;AACF,WAAK,OAAL;AACEnB,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACK,KAAK,CAACe,kBAAP,CAAlB;AACA;;AACF,WAAK,OAAL;AACEpB,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACK,KAAK,CAACgB,UAAP,CAAlB;AACA;;AACF,WAAK,OAAL;AACErB,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACK,KAAK,CAACiB,eAAP,CAAlB;AACA;;AACF,WAAK,OAAL;AACEtB,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACM,KAAK,CAACiB,WAAP,CAAlB;AACA;;AACF,WAAK,OAAL;AACEvB,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACM,KAAK,CAACkB,UAAP,CAAlB;AACA;;AACF,WAAK,OAAL;AACExB,QAAAA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAACM,KAAK,CAACmB,gBAAP,CAAlB;AACA;;AACF,WAAK,MAAL;AACE,YAAIC,EAAE,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CAAT;AACA,YAAGvB,KAAK,CAACwB,aAAN,KAAwB,qCAA3B,EACED,EAAE,GAAG,CAAC,CAAD,EAAI,KAAJ,EAAW,KAAX,CAAL,CADF,KAEK,IAAIvB,KAAK,CAACwB,aAAN,KAAwB,kDAA5B,EACHD,EAAE,GAAG,CAAC,KAAD,EAAQ,CAAR,EAAW,KAAX,CAAL,CADG,KAEA,IAAGvB,KAAK,CAACwB,aAAN,KAAwB,mBAA3B,EACHD,EAAE,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,CAAf,CAAL;AACA1B,QAAAA,MAAM,CAAC,MAAD,CAAN,GAAiB0B,EAAjB;AACF;;AACF,WAAK,MAAL;AACE1B,QAAAA,MAAM,CAAC,MAAD,CAAN,GAAiBI,KAAK,CAACwB,aAAvB;AACA;;AACJ;AACE;AA5DF;AA8DD;;AACD,SAAO5B,MAAP;AACD,CA1ED;;AA4EA,IAAI6B,GAAG,GAAG,EAAV;;AACA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAExB,MAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,EAAAA,GAAG,CAACE,IAAJ,CAAS,KAAT,EAAgB7D,OAAhB,EAAyB,IAAzB;AACA2D,EAAAA,GAAG,CAACG,YAAJ,GAAmB,aAAnB;;AACAH,EAAAA,GAAG,CAACI,kBAAJ,GAAyB,YAAU;AACnC,QAAIJ,GAAG,CAACK,UAAJ,KAAmB,CAAvB,EAAyB;AACvB,UAAI,CAAEL,GAAG,CAACM,MAAJ,KAAe,GAAhB,IAAyBN,GAAG,CAACM,MAAJ,KAAe,CAAzC,KAAiDN,GAAG,CAAClC,QAAzD,EAAmE;AACjEkC,QAAAA,GAAG,CAACO,SAAJ,GAAgB,YAAW;AACxB,cAAIvC,MAAM,GAAGH,aAAa,CAAC,KAAKC,QAAN,EAAgBiC,KAAK,CAAChC,WAAtB,CAA1B;AACA,cAAIyC,OAAO,GAAIlE,OAAO,CAACC,OAAD,CAAP,CAAiBkE,SAAjB,CAA2B,KAAK3C,QAAhC,EAA0CE,MAA1C,CAAf;AACA,cAAI0C,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACH,OAAD,CAAT,EAAoB;AAACI,YAAAA,IAAI,EAAE;AAAP,WAApB,CAAX;AACAf,UAAAA,GAAG,GAAIgB,GAAG,CAACC,eAAJ,CAAoBJ,IAApB,CAAP;AAEA,cAAIK,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAb;AACAF,UAAAA,MAAM,CAACG,GAAP,GAAWrB,GAAX;AACF,SARD;AASD;AACF;AACF,GAdC;;AAeFG,EAAAA,GAAG,CAACmB,IAAJ;AACC;;AAED,MAAMjD,WAAW,GAAG,UAASF,MAAT,EAAgB;AAClC,QAAMS,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAYT,MAAZ,CAAb;;AACA,OAAI,IAAIoD,GAAR,IAAe3C,IAAf,EAAoB;AAClBT,IAAAA,MAAM,CAACS,IAAI,CAAC2C,GAAD,CAAL,CAAN,GAAoB,EAApB;AACD;AACF,CALD;;AASA,SAASC,OAAT,CAAiBtB,KAAjB,EAAwB;AACtB,QAAMuB,OAAO,GAAG1E,SAAS,EAAzB;AACA,QAAM,CAACsD,IAAD,EAAOqB,OAAP,IAAkB1F,KAAK,CAAC2F,QAAN,CAAe,KAAf,CAAxB;;AAEA,QAAMC,UAAU,GAAG,MAAM;AACvB3B,IAAAA,SAAS,CAACC,KAAD,CAAT,CAAiB2B,IAAjB,CAAsBC,KAAtB,EADuB,CAEvB;AACE;;AACFJ,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD,GALD;;AAOA,QAAMK,WAAW,GAAG,MAAM;AACxBL,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIA,SACE,oBAAC,IAAD;AACA,IAAA,SAAS,MADT;AAEA,IAAA,OAAO,EAAC,QAFR;AAGA,IAAA,UAAU,EAAC,QAHX;AAIA,IAAA,SAAS,EAAC,UAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOI,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,SAAS,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADJ,CAPJ,EAWI,oBAAC,IAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,IAAI,MAFR;AAGI,IAAA,EAAE,EAAE,EAHR;AAII,IAAA,SAAS,EAAC,MAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACV,oBAAC,MAAD;AACA,IAAA,OAAO,EAAC,WADR;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,OAAO,EAAEE,UAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADU,EAQV,oBAAC,KAAD;AACE,uBAAgB,wBADlB;AAEE,wBAAiB,8BAFnB;AAGE,IAAA,SAAS,EAAEH,OAAO,CAACxE,KAHrB;AAIE,IAAA,IAAI,EAAEoD,IAJR;AAKE,IAAA,oBAAoB,MALtB;AAME,IAAA,iBAAiB,EAAElE,QANrB;AAOE,IAAA,aAAa,EAAE;AACb6F,MAAAA,OAAO,EAAE;AADI,KAPjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAE3B,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAQ,IAAA,EAAE,EAAC,UAAX;AAAsB,IAAA,KAAK,EAAE;AAAC4B,MAAAA,UAAU,EAAE,YAAb;AAA2BnE,MAAAA,KAAK,EAAE,MAAlC;AAA0CC,MAAAA,MAAM,EAAE;AAAlD,KAA7B;AAAwF,IAAA,KAAK,EAAC,iBAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,EAEI;AAAK,IAAA,EAAE,EAAC,kBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAII,oBAAC,GAAD;AAAK,IAAA,OAAO,EAAC,MAAb;AAAqB,IAAA,cAAc,EAAC,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACM,oBAAC,MAAD;AACI,IAAA,OAAO,EAAC,UADZ;AAEI,IAAA,IAAI,EAAC,QAFT;AAGI,IAAA,OAAO,EAAEgE,WAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADN,CAJJ,CADA,CAXF,CARU,CANR,CAXJ,EAyDI,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAzDJ,CADF;AA8DD;;AAED,SAASG,eAAT,CAAyB9C,KAAzB,EAA+B;AAC7B,SAAOA,KAAP;AACD;;AAED,eAAevC,OAAO,CAACqF,eAAD,CAAP,CAAyBV,OAAzB,CAAf","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport PdfFile from '../fw4.pdf'\nimport pdfform from '../../node_modules/pdfform.js/pdfform'\nimport minipdf from '../../node_modules/pdfform.js/minipdf'\nimport Grid from '@material-ui/core/Grid';\nimport Navigation from '../components/navigation';\nimport { connect } from 'react-redux';\nimport { isMobile } from \"react-device-detect\";\n\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(1, 1, 6),\n    width: '50%',\n    height: '90%',\n    background:'beige'\n\n  },\n}));\n\nconst pdfDataLoaded = (response, formReducer) => {\n  var fields = pdfform().list_fields(response);\n  resetFields(fields);\n\n  const step1 = formReducer.step1;\n  const step2 = formReducer.step2;\n  const step3 = formReducer.step3;\n  const step4 = formReducer.step4;\n\n  for(var field of Object.keys(fields)){\n    switch(field){\n      case 'f1_01':\n        const name = step1.name.firstName + ' ' + step1.name.middleName;\n        fields['f1_01'] = [name];\n        break;\n      case 'f1_02':\n        const lastName = step1.name.lastName;\n        fields['f1_02'] = [lastName];\n        break;\n      case 'f1_03':\n        const street = step1.address.street;\n        fields['f1_03'] = [street];\n        break;\n      case 'f1_04':\n        var address = \"\";\n        if(step1.address.city)\n          address += step1.address.city;\n        if(step1.address.state)\n          address += ', ' + step1.address.state;\n        if(step1.address.zip) \n          address += ', ' + step1.address.zip;\n\n        fields['f1_04'] = [address];\n        break;\n      case 'f1_05':\n        const ssn = step1.ssn;\n        fields['f1_05'] = [ssn];\n        break;\n      case 'f1_06':\n        fields['f1_06'] = [step3.qualifyingChildren];\n        break;\n      case 'f1_07':\n        fields['f1_07'] = [step3.dependents];\n        break;\n      case 'f1_08':\n        fields['f1_08'] = [step3.totalDependents];\n        break;\n      case 'f1_09':\n        fields['f1_09'] = [step4.otherIncome];\n        break;\n      case 'f1_10':\n        fields['f1_10'] = [step4.deductions];\n        break;\n      case 'f1_11':\n        fields['f1_11'] = [step4.extraWithholding];\n        break;\n      case 'c1_1':\n        var ms = [false, false, false];\n        if(step1.maritalStatus === 'Single or Married filing separately')\n          ms = [1, false, false];\n        else if (step1.maritalStatus === 'Married filing jointly (or Qualifying widow(er))')\n          ms = [false, 2, false];\n        else if(step1.maritalStatus === 'Head of household')\n          ms = [false, false, 3];\n          fields['c1_1'] = ms;\n        break;\n      case 'c1_2':\n        fields['c1_2'] = step2.multiCheckBox;\n        break;\n    default:\n      break; \n    }\n  }\n  return fields;\n}\n\nvar url = \"\";\nfunction asyncCall(props) {\n\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"GET\", PdfFile, true);\n  xhr.responseType = \"arraybuffer\";\n  xhr.onreadystatechange = function(){\n  if (xhr.readyState === 4){\n    if (((xhr.status === 200) || (xhr.status === 0)) && (xhr.response)){\n      xhr.onloadend = function() {\n         var fields = pdfDataLoaded(this.response, props.formReducer)\n         var pdfData =  pdfform(minipdf).transform(this.response, fields)\n         var blob = new Blob([pdfData], {type: 'application/pdf'});\n         url =  URL.createObjectURL(blob);\n\n         var iframe = document.getElementById(\"pdfFrame\");\n         iframe.src=url\n      }\n    }\n  }\n}\nxhr.send()\n}\n\nconst resetFields = function(fields){\n  const keys = Object.keys(fields);\n  for(let key in keys){\n    fields[keys[key]] = [];\n  }\n}\n\n\n\nfunction PdfView(props) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    asyncCall(props).then(alert);\n    //if(isMobile)\n      //window.location = url;\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Grid \n    container \n    justify=\"center\" \n    alignItems=\"center\" \n    className=\"mainGrid\"\n    >\n\n        <Grid item>\n            <h1 className=\"heading\">Preview your data on form</h1>\n        </Grid>\n\n        <Grid \n            container \n            item \n            xs={12} \n            className=\"root\"\n            >\n                <div>\n      <Button \n      variant=\"contained\"\n        size=\"large\" \n        onClick={handleOpen}\n      >\n          Show Data on Actual Form  \n      </Button>\n      <Modal\n        aria-labelledby=\"transition-modal-title\"\n        aria-describedby=\"transition-modal-description\"\n        className={classes.modal}\n        open={open}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={open}>\n        <Paper className='paper'>\n        <iframe id=\"pdfFrame\" style={{boxSsizing: 'border-box', width: '100%', height: '100%'}} title=\"Federal W4 Form\"></iframe>\n            <div id=\"annotation-layer\"></div>\n\n            <Box display=\"flex\"  justifyContent='center'>\n                  <Button \n                      variant=\"outlined\" \n                      size=\"medium\" \n                      onClick={handleClose}\n                  >\n                          Close  \n                  </Button>\n            </Box>\n        </Paper>\n        </Fade>\n      </Modal>\n    </div>\n  </Grid>\n\n\n        <Navigation prev=\"/pdffed/step4\" />\n  </Grid>\n    \n  );\n}\n\nfunction mapStateToProps(state){\n  return state;\n}\n\nexport default connect(mapStateToProps)(PdfView);"]},"metadata":{},"sourceType":"module"}